{% extends 'base.html' %}

{% block title %}Password Generator{% endblock %}

{% block content %}
<div class="container">
    <h1>Password Generator</h1>
    <form method="post">
        <div class="form-group">
            <label for="length">Password Length:</label>
            <input type="number" id="length" name="length" class="form-control" value="{{ length }}" min="1" required>
        </div>
        <div class="form-check">
            <input type="checkbox" id="uppercase" name="uppercase" class="form-check-input" {% if include_uppercase %}checked{% endif %}>
            <label class="form-check-label" for="uppercase">Include Uppercase Letters</label>
        </div>
        <div class="form-check">
            <input type="checkbox" id="digits" name="digits" class="form-check-input" {% if include_digits %}checked{% endif %}>
            <label class="form-check-label" for="digits">Include Digits</label>
        </div>
        <div class="form-check">
            <input type="checkbox" id="special" name="special" class="form-check-input" {% if include_special %}checked{% endif %}>
            <label class="form-check-label" for="special">Include Special Characters</label>
        </div>
        <button type="submit" class="btn btn-primary mt-3">Generate Password</button>
    </form>

    {% if password %}
    <div class="mt-4">
        <h3>Your Generated Password:</h3>
        <div class="input-group mb-3">
            <input type="text" class="form-control" id="generatedPassword" value="{{ password }}" readonly>
            <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button" onclick="copyPassword()">Copy</button>
            </div>
        </div>
        <h4>Password Strength:</h4>
        <p class="bg-light p-3" style="color: {{ color }};">{{ strength }}</p>
        {% if strength == 'Weak' %}
        <p>Suggestions: Increase password length, and consider adding uppercase letters, digits, or special characters.</p>
        {% elif strength == 'Moderate' %}
        <p>Suggestions: Consider adding more characters or including a mix of uppercase letters, digits, and special characters.</p>
        {% elif strength == 'Strong' %}
        <p>Good job! Your password is strong. For even better security, you might add more special characters.</p>
        {% elif strength == 'Very Strong' %}
        <p>Excellent! Your password is very strong.</p>
        {% endif %}
    </div>
    {% endif %}
</div>

<script>
    function copyPassword() {
        const passwordInput = document.getElementById('generatedPassword');
        passwordInput.select();
        passwordInput.setSelectionRange(0, 99999); // For mobile devices

        navigator.clipboard.writeText(passwordInput.value)
            .then(() => {
                alert('Password copied to clipboard!');
            })
            .catch((error) => {
                console.error('Could not copy text: ', error);
            });
    }
</script>
{% endblock %}
